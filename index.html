// Добавьте эту функцию в начало файла app.js
function addTouchSupport(element, callback) {
    element.addEventListener('click', callback);
    element.addEventListener('touchstart', function(e) {
        e.preventDefault();
        callback(e);
    }, { passive: false });
}

// Замените существующую инициализацию обработчиков событий в DOMContentLoaded:
document.addEventListener('DOMContentLoaded', function() {
    // Обработчики для кнопок раундов
    const decreaseButton = document.getElementById('decreaseRounds');
    const increaseButton = document.getElementById('increaseRounds');

    if (decreaseButton && increaseButton) {
        addTouchSupport(decreaseButton, () => {
            if (state.rounds.total > 1) {
                state.rounds.total--;
                updateRoundsDisplay();
                saveUserData();
            }
        });

        addTouchSupport(increaseButton, () => {
            if (state.rounds.total < 10) {
                state.rounds.total++;
                updateRoundsDisplay();
                saveUserData();
            }
        });
    }

    // Обработчик для круга дыхания
    addTouchSupport(elements.breathCircle, handleBreathCircleClick);

    // Обработчики для вкладок статистики
    document.querySelectorAll('.stats-tab').forEach(tab => {
        addTouchSupport(tab, (e) => handleStatsTabClick(e));
    });

    // Обработчик для кнопки музыки
    const musicControl = document.getElementById('musicControl');
    if (musicControl) {
        addTouchSupport(musicControl, toggleMusic);
    }

    // Загрузка сохраненных данных при старте
    loadUserData();
    updateStatsDisplay();
    checkAchievements();
});
